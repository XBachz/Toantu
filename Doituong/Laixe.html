<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car Game</title>
    <style>
        canvas {
            border: 2px solid black;
            display: block;
            margin: auto;
            background: #eee;
        }
        h2 {
            text-align: center;
        }
    </style>
</head>
<body>
<h2>üöó Simple Car Game</h2>
<canvas id="gameCanvas" width="500" height="400"></canvas>
<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Th√¥ng tin xe
    let car = { x: 50, y: 50, size: 20, dx: 2, dy: 0, speed: 2 };

    // ƒêi·ªÉm s·ªë
    let score = 0;
    let gameOver = false;

    // Sinh ng·∫´u nhi√™n ch∆∞·ªõng ng·∫°i v·∫≠t v√† ph·∫ßn th∆∞·ªüng
    function randomItems(num, type) {
        let items = [];
        for (let i = 0; i < num; i++) {
            items.push({
                x: Math.random() * (canvas.width - 20),
                y: Math.random() * (canvas.height - 20),
                size: 20,
                type: type
            });
        }
        return items;
    }

    let obstacles = randomItems(5, "obstacle");
    let rewards = randomItems(5, "reward");

    // V·∫Ω xe
    function drawCar() {
        ctx.fillStyle = "blue";
        ctx.fillRect(car.x, car.y, car.size, car.size);
    }

    // V·∫Ω ch∆∞·ªõng ng·∫°i v·∫≠t
    function drawObstacles() {
        ctx.fillStyle = "red";
        obstacles.forEach(obs => {
            ctx.fillRect(obs.x, obs.y, obs.size, obs.size);
        });
    }

    // V·∫Ω ph·∫ßn th∆∞·ªüng
    function drawRewards() {
        ctx.fillStyle = "gold";
        rewards.forEach(rew => {
            ctx.beginPath();
            ctx.arc(rew.x + rew.size/2, rew.y + rew.size/2, rew.size/2, 0, Math.PI * 2);
            ctx.fill();
        });
    }

    // Hi·ªÉn th·ªã ƒëi·ªÉm
    function drawScore() {
        ctx.fillStyle = "black";
        ctx.font = "16px Arial";
        ctx.fillText("Score: " + score, 10, 20);
    }

    // Di chuy·ªÉn xe
    function moveCar() {
        car.x += car.dx;
        car.y += car.dy;

        // Gi·ªØ trong khung canvas
        if (car.x < 0) car.x = 0;
        if (car.y < 0) car.y = 0;
        if (car.x + car.size > canvas.width) car.x = canvas.width - car.size;
        if (car.y + car.size > canvas.height) car.y = canvas.height - car.size;
    }

    // Ki·ªÉm tra va ch·∫°m
    function checkCollision() {
        // Va v√†o ch∆∞·ªõng ng·∫°i v·∫≠t ‚Üí Game Over
        for (let obs of obstacles) {
            if (car.x < obs.x + obs.size &&
                car.x + car.size > obs.x &&
                car.y < obs.y + obs.size &&
                car.y + car.size > obs.y) {
                gameOver = true;
            }
        }

        // ƒÇn ph·∫ßn th∆∞·ªüng ‚Üí + ƒëi·ªÉm
        rewards = rewards.filter(rew => {
            if (car.x < rew.x + rew.size &&
                car.x + car.size > rew.x &&
                car.y < rew.y + rew.size &&
                car.y + car.size > rew.y) {
                score += 10;
                return false; // b·ªè ph·∫ßn th∆∞·ªüng ƒë√£ ƒÉn
            }
            return true;
        });
    }

    // V√≤ng l·∫∑p game
    function gameLoop() {
        if (gameOver) {
            ctx.fillStyle = "black";
            ctx.font = "30px Arial";
            ctx.fillText("GAME OVER", canvas.width / 2 - 80, canvas.height / 2);
            ctx.fillText("Score: " + score, canvas.width / 2 - 60, canvas.height / 2 + 40);
            return;
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawCar();
        drawObstacles();
        drawRewards();
        drawScore();

        moveCar();
        checkCollision();

        requestAnimationFrame(gameLoop);
    }

    // ƒêi·ªÅu khi·ªÉn
    document.addEventListener("keydown", (e) => {
        switch (e.key) {
            case "ArrowUp": car.dx = 0; car.dy = -car.speed; break;
            case "ArrowDown": car.dx = 0; car.dy = car.speed; break;
            case "ArrowLeft": car.dx = -car.speed; car.dy = 0; break;
            case "ArrowRight": car.dx = car.speed; car.dy = 0; break;
            case "Control": // tƒÉng t·ªëc
                car.dx *= 2;
                car.dy *= 2;
                break;
        }
    });

    // Reset t·ªëc ƒë·ªô khi nh·∫£ Ctrl
    document.addEventListener("keyup", (e) => {
        if (e.key === "Control") {
            car.dx = car.dx / 2;
            car.dy = car.dy / 2;
        }
    });

    // B·∫Øt ƒë·∫ßu game
    gameLoop();
</script>
</body>
</html>
